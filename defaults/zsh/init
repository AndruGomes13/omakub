if command -v mise &> /dev/null; then
  eval "$(mise activate zsh)"
fi

if command -v zoxide &> /dev/null; then
  eval "$(zoxide init zsh)"
fi

if command -v fzf >/dev/null; then
  # Modern fzf (0.48+) - preferred method
  if fzf --zsh &>/dev/null; then
    eval "$(fzf --zsh)"
  else
    # Ubuntu/Debian (apt install fzf)
    [[ -f /usr/share/doc/fzf/examples/key-bindings.zsh ]] && source /usr/share/doc/fzf/examples/key-bindings.zsh
    [[ -f /usr/share/doc/fzf/examples/completion.zsh ]] && source /usr/share/doc/fzf/examples/completion.zsh
    # Arch style
    [[ -f /usr/share/fzf/key-bindings.zsh ]] && source /usr/share/fzf/key-bindings.zsh
    [[ -f /usr/share/fzf/completion.zsh ]] && source /usr/share/fzf/completion.zsh
    # Homebrew / manual install
    [[ -f ~/.fzf.zsh ]] && source ~/.fzf.zsh
  fi
fi
